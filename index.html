<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wixdex</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    
    <main>

        <section id="deck-area">

            <div id="lrig-deck">
                <h2>ルリグデッキ</h2>
                <div class="card-row" id="lrig-deck-cards">
                </div>
            </div>

            <div id="main-deck">
                <h2>メインデッキ</h2>
                <div class="card-grid" id="main-deck-cards">
                </div>
            </div>

        </section>

        <section id="card-list">

            <h2>カード一覧</h2>

            <div id="cards-container">
            </div>

        </section>

        <section id="search-tool">

            <div id="search-box">検索ツール</div>

        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    fetch('cards.json')
        .then(response => response.json())
        .then(data => {
            displayCards(data);
        })
        .catch(error => console.error('Error loading card data:', error));
});

function displayCards(cards) {
    const cardsContainer = document.getElementById('cards-container');

    cards.forEach(card => {
        const cardElement = document.createElement('div');
        cardElement.classList.add('card');
        
        const cardImage = document.createElement('img');
        cardImage.src = card.image;
        cardImage.alt = card.name;
        
        cardElement.appendChild(cardImage);
        cardsContainer.appendChild(cardElement);

        // カードにスワイプ機能を追加
        cardElement.addEventListener('swiped-up', () => {
            addToDeck(card);
        });
    });
}

function addToDeck(card) {
    const lrigDeck = document.getElementById('lrig-deck').querySelector('.card-row');
    const mainDeck = document.getElementById('main-deck').querySelector('.card-grid');

    // ルリグデッキのカード数を取得
    const lrigDeckCards = lrigDeck.children.length;

    // カードのタイプに応じてデッキに追加
    if (['ルリグ', 'アシストルリグ', 'ピース', 'アーツ'].includes(card.type[0])) {
        if (lrigDeckCards < 7) {
            // ルリグデッキに追加
            const cardElement = document.createElement('div');
            cardElement.classList.add('card');
            
            const cardImage = document.createElement('img');
            cardImage.src = card.image;
            cardImage.alt = card.name;
            
            cardElement.appendChild(cardImage);
            lrigDeck.appendChild(cardElement);
            console.log('ルリグデッキにカードを追加しました');
        } else {
            console.log('ルリグデッキは7枚までしか追加できません');
        }
    } else if (['シグニ', 'スペル'].includes(card.type[0])) {
        // メインデッキに追加（ここではメインデッキの処理は省略）
        const cardElement = document.createElement('div');
        cardElement.classList.add('card');
        
        const cardImage = document.createElement('img');
        cardImage.src = card.image;
        cardImage.alt = card.name;
        
        cardElement.appendChild(cardImage);
        mainDeck.appendChild(cardElement);
        console.log('メインデッキにカードを追加しました');
    } else {
        console.log(`カードタイプ ${card.type[0]} は認識できません`);
    }
}

    </script>
</body>

</html>
