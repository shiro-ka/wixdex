<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wixdex</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    
    <main>

        <section id="deck-area">

            <div id="lrig-deck">
                <h2>ルリグデッキ</h2>
                <div class="card-row" id="lrig-deck-container">
                    <!-- ルリグデッキのカード画像をここに追加 -->
                </div>
            </div>

            <div id="main-deck">
                <h2>メインデッキ</h2>
                <div class="card-grid" id="main-deck-container">
                    <!-- メインデッキのカード画像をここに追加 -->
                </div>
            </div>

        </section>

        <section id="card-list">

            <h2>カード一覧</h2>

            <div id="cards-container">
                <!-- カード画像をここに追加 -->
            </div>

        </section>

        <section id="search-tool">

            <div id="search-box">検索ツール</div>

        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('card.json')
                .then(response => response.json())
                .then(data => {
                    displayCards(data);
                })
                .catch(error => console.error('Error loading card data:', error));
        });

        function displayCards(cards) {
            const cardsContainer = document.getElementById('cards-container');

            cards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');
                cardElement.dataset.type = card.type; // カードの種類をデータ属性に保存
                
                const cardImage = document.createElement('img');
                cardImage.src = card.image;
                cardImage.alt = card.name;
                
                cardElement.appendChild(cardImage);
                cardsContainer.appendChild(cardElement);

                // フリック操作のイベントリスナーを追加
                cardElement.addEventListener('touchend', (event) => {
                    handleCardFlick(event, cardElement);
                });
            });
        }

        function handleCardFlick(event, cardElement) {
            const cardType = cardElement.dataset.type;

            // カードが追加されるべきデッキを決定
            let deckContainer;
            if (['ルリグ', 'アシストルリグ', 'ピース', 'アーツ'].includes(cardType)) {
                deckContainer = document.getElementById('lrig-deck-container');
            } else if (['シグニ', 'スペル'].includes(cardType)) {
                deckContainer = document.getElementById('main-deck-container');
            }

            if (deckContainer) {
                const cardClone = cardElement.cloneNode(true);
                deckContainer.appendChild(cardClone);
                cardElement.remove(); // カードをカード一覧から削除
            }
        }
    </script>
</body>

</html>
